None<header>
<nav>
<ul>
</ul>
</nav>
</header><main>
<body class="jp-Notebook" data-jp-theme-light="true" data-jp-theme-name="JupyterLab Light">
<main>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="Section-602---CONSTRUCTION-CLASSIFICATION">Section 602 - CONSTRUCTION CLASSIFICATION<a class="anchor-link" href="#Section-602---CONSTRUCTION-CLASSIFICATION">¶</a></h1><h2 id="Building-Code">Building Code<a class="anchor-link" href="#Building-Code">¶</a></h2><h3 id="TABLE-602-FIRE-RESISTANCE-RATING-REQUIREMENTS-FOR-EXTERIOR-WALLS-BASED-ON-FIRE-SEPARATION-DISTANCEa,-d,-g">TABLE 602 FIRE-RESISTANCE RATING REQUIREMENTS FOR EXTERIOR WALLS BASED ON FIRE SEPARATION DISTANCEa, d, g<a class="anchor-link" href="#TABLE-602-FIRE-RESISTANCE-RATING-REQUIREMENTS-FOR-EXTERIOR-WALLS-BASED-ON-FIRE-SEPARATION-DISTANCEa,-d,-g">¶</a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [13]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">json</span> 
<span class="c1"># Load the table from the JSON file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'table_602.json'</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">table_602</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [14]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Add the path to the Rule Notebooks folder to the system path</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">'../..'</span><span class="p">))</span>

<span class="c1"># Import the find_value function from table_lookup.py</span>
<span class="kn">from</span> <span class="nn">ruleFunctions</span> <span class="kn">import</span> <span class="n">find_value</span><span class="p">,</span> <span class="n">check_value</span><span class="p">,</span> <span class="n">get_building_info</span><span class="p">,</span> <span class="n">create_scrollable_table</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [19]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Define the SPARQL endpoint URL and query file path</span>
<span class="n">endpoint_url</span> <span class="o">=</span> <span class="s2">"http://localhost:3030/SmartReviewHotel/sparql"</span>

<span class="c1"># Call the function to get the building information</span>
<span class="n">main_construction_type</span><span class="p">,</span> <span class="n">subtype</span><span class="p">,</span> <span class="n">occupancy_group</span><span class="p">,</span> <span class="n">sprinkler_system</span><span class="p">,</span> <span class="n">sprinkler_type</span><span class="p">,</span> <span class="n">storey_num</span> <span class="o">=</span> <span class="n">get_building_info</span><span class="p">(</span><span class="n">endpoint_url</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">main_construction_type</span><span class="p">,</span> <span class="n">subtype</span><span class="p">,</span> <span class="n">occupancy_group</span><span class="p">,</span> <span class="n">sprinkler_system</span><span class="p">,</span> <span class="n">sprinkler_type</span><span class="p">,</span> <span class="n">storey_num</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Type V A R-1 S 13 4
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [20]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_range</span><span class="p">(</span><span class="n">distance</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">"&lt; 5"</span>
    <span class="k">elif</span> <span class="mi">5</span> <span class="o">&lt;=</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">"5 &lt;= X &lt; 10"</span>
    <span class="k">elif</span> <span class="mi">10</span> <span class="o">&lt;=</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">"10 &lt;= X &lt; 30"</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">"&lt;= 30"</span>

<span class="k">def</span> <span class="nf">adjust_construction_type</span><span class="p">(</span><span class="n">distance</span><span class="p">,</span> <span class="n">main_construction_type</span><span class="p">):</span>
    <span class="c1"># Adjust the construction type based on the distance and provided type</span>
    <span class="n">adjusted_construction_type</span> <span class="o">=</span> <span class="n">main_construction_type</span>
    <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="ow">or</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">:</span>
        <span class="n">adjusted_construction_type</span> <span class="o">=</span> <span class="s2">"All"</span>
    <span class="k">elif</span> <span class="mi">5</span> <span class="o">&lt;=</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="ow">and</span> <span class="n">main_construction_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"IA"</span><span class="p">]:</span>
        <span class="n">adjusted_construction_type</span> <span class="o">=</span> <span class="s2">"Others"</span>
    <span class="k">elif</span> <span class="mi">10</span> <span class="o">&lt;=</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="mi">30</span> <span class="ow">and</span> <span class="n">main_construction_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"IA"</span><span class="p">,</span> <span class="s2">"IB"</span><span class="p">,</span> <span class="s2">"IIB"</span><span class="p">,</span> <span class="s2">"VB"</span><span class="p">]:</span>
        <span class="n">adjusted_construction_type</span> <span class="o">=</span> <span class="s2">"Others"</span>
    <span class="k">return</span> <span class="n">adjusted_construction_type</span>

<span class="k">def</span> <span class="nf">get_value_from_lookup</span><span class="p">(</span><span class="n">distance</span><span class="p">,</span> <span class="n">construction_type</span><span class="p">,</span> <span class="n">occupancy_group</span><span class="p">):</span>
    <span class="n">range_value</span> <span class="o">=</span> <span class="n">get_range</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">table_602</span><span class="p">[</span><span class="s2">"FIRE_SEPARATION_DISTANCE"</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">entry</span><span class="p">[</span><span class="s2">"range"</span><span class="p">]</span> <span class="o">==</span> <span class="n">range_value</span> <span class="ow">and</span> <span class="n">entry</span><span class="p">[</span><span class="s2">"TYPE_OF_CONSTRUCTION"</span><span class="p">]</span> <span class="o">==</span> <span class="n">construction_type</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">"OCCUPANCY_GROUP_</span><span class="si">{</span><span class="n">occupancy_group</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [21]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">SPARQLWrapper</span> <span class="kn">import</span> <span class="n">SPARQLWrapper</span><span class="p">,</span> <span class="n">JSON</span>

<span class="n">sparql</span> <span class="o">=</span> <span class="n">SPARQLWrapper</span><span class="p">(</span><span class="n">endpoint_url</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"..\..\..\SPARQL\exteriorNonbearing.sparql"</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">sparql_query</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="c1"># Set the SPARQL query and the return format</span>
<span class="n">sparql</span><span class="o">.</span><span class="n">setQuery</span><span class="p">(</span><span class="n">sparql_query</span><span class="p">)</span>
<span class="n">sparql</span><span class="o">.</span><span class="n">setReturnFormat</span><span class="p">(</span><span class="n">JSON</span><span class="p">)</span>

<span class="c1"># Execute the query and get the results in JSON format</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">sparql</span><span class="o">.</span><span class="n">query</span><span class="p">()</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>

<span class="c1"># Process SPARQL results</span>
<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s2">"results"</span><span class="p">][</span><span class="s2">"bindings"</span><span class="p">]:</span>
    <span class="n">fire_separation_distance</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">"smrvExteriorFireSeparationDistance_property_simple"</span><span class="p">][</span><span class="s2">"value"</span><span class="p">])</span>
    <span class="n">main_construction_type</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">"batid"</span><span class="p">][</span><span class="s2">"value"</span><span class="p">]</span>  <span class="c1"># Assuming this is where the type is stored</span>
    
    <span class="c1"># Adjust construction type based on distance and provided type</span>
    <span class="n">adjusted_construction_type</span> <span class="o">=</span> <span class="n">adjust_construction_type</span><span class="p">(</span><span class="n">fire_separation_distance</span><span class="p">,</span> <span class="n">main_construction_type</span><span class="p">)</span>
    
    <span class="n">occupancy_group</span> <span class="o">=</span> <span class="s2">"A"</span>  <span class="c1"># Example occupancy group; adjust as needed</span>
    
    <span class="c1"># Get the value from lookup data</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">get_value_from_lookup</span><span class="p">(</span><span class="n">fire_separation_distance</span><span class="p">,</span> <span class="n">adjusted_construction_type</span><span class="p">,</span> <span class="n">occupancy_group</span><span class="p">)</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Wall ID: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">'wall'</span><span class="p">][</span><span class="s1">'value'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Fire Rating: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">'fireRating'</span><span class="p">][</span><span class="s1">'value'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Fire Separation Distance: </span><span class="si">{</span><span class="n">fire_separation_distance</span><span class="si">}</span><span class="s2"> feet"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Adjusted Construction Type: </span><span class="si">{</span><span class="n">adjusted_construction_type</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Value for Occupancy Group </span><span class="si">{</span><span class="n">occupancy_group</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>  <span class="c1"># Print a blank line for readability</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [22]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>{'head': {'vars': ['wall', 'batid', 'fireRating', 'fireSeparationDistance']}, 'results': {'bindings': []}}
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
</div>
</div>
</div>
</div>
</main>
</body>
</main>

